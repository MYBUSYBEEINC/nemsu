 <?php //LOAD SERVICE DETAILS BY AJAX global $wpdb; if(isset($_REQUEST['cat_show'])) { 	$fetch_var=$_REQUEST['cat_show']; 	$ap_fetch_service=$wpdb->get_results("select * from $wpdb->prefix"."apt_services WHERE category = $fetch_var "); 	$ap_fetch_cat_ac=$wpdb->get_results("select * from $wpdb->prefix"."apt_category"); } if($ap_fetch_service==null)  	{ echo "<h1>".__('No Services Found',WL_A_P_SYSTEM )."</h1>"; } else { 	/*Service display settings*/	$current_user = wp_get_current_user();	$role = $current_user->roles;	$current_role = $role[0];	$data_0 = get_option('weblizar_aps_staff_dashboard_settings');	$staff_service_setting = $data_0['staff_service_setting'];	$service_edit = $data_0['service_edit']; ?> 	<h1><?php _e("Services",WL_A_P_SYSTEM );?></h1> 	<?php foreach($ap_fetch_service as $ap_fetch_val ) { ?> 	<div class="panel-group accordion"> 		<div class="panel panel-default"> 			<div class="panel-heading"> 				<h4 class="panel-title"> 					<div class="ser-name"> 						<i class="<?php echo $ap_fetch_val->icon; ?>"></i> 						<?php $background_color= $ap_fetch_val->color; ?> 						<span class="cal_bg_color"  style="background-color:<?php if($background_color !== "" ){ echo $background_color; } else{ echo "white" ;} ?>"></span> 						<span><?php echo $ap_fetch_val->name; ?></span> 					</div> 					<div class="ser-price"> 						<?php $settings_table =	$wpdb->prefix."apt_settings"; 						$settings_payment_currency = get_option('weblizar_aps_payment_setting'); //$wpdb->get_col( "SELECT currency from $settings_table" ); 						$general_option = get_option('weblizar_aps_general_setting'); 						$payment_currency = $general_option['currency']; 						?> 						<span class="app-price"><?php echo $ap_fetch_val->price; ?><?php echo " ".$payment_currency;?></span> 						<span class="app-timing"><?php echo $ap_fetch_val->duration; ?><?php echo "m";?></span> 					</div> 					<?php  					if($ap_fetch_val->id !=='1') { ?> 					<div class="service_input_checkbox"><input type="checkbox" id="select_services" class="sl-services service_check" value="<?php echo $ap_fetch_val->id; ?>" /></div> 					<?php }  					if($current_role != "administrator"){ 							if($staff_service_setting == 'yes'){								if($service_edit == 'no'){			 					?>			 					<div class="ser-link"> 									 						<button class="btn" data-toggle="collapse" data-parent=".accordion" href=".fetch_ser1-<?php echo $ap_fetch_val->id; ?>"><i class="fas fa-eye"></i></button>			 					</div>			 					<?php 			 				} 							 			elseif($service_edit == 'yes'){				 			?>				 				<div class="ser-link">				 						<button class="btn" data-toggle="collapse" data-parent=".accordion" href=".fetch_ser2-<?php echo $ap_fetch_val->id; ?>"><i class="fas fa-pen-square"></i></button>				 						<button class="btn" data-toggle="collapse" data-parent=".accordion" href=".fetch_ser1-<?php echo $ap_fetch_val->id; ?>"><i class="fas fa-eye"></i></button>				 					</div>				 			<?php					 			}			 			} 					} 					else{					?>						<div class="ser-link">							<button class="btn" data-toggle="collapse" data-parent=".accordion" href=".fetch_ser2-<?php echo $ap_fetch_val->id; ?>"><i class="fas fa-pen-square"></i></button>							<button class="btn" data-toggle="collapse" data-parent=".accordion" href=".fetch_ser1-<?php echo $ap_fetch_val->id; ?>"><i class="fas fa-eye"></i></button>						</div>					<?php 					} 				 					?> 				</h4> 			</div> 			<div class="fetch_ser1-<?php echo $ap_fetch_val->id; ?> panel-collapse collapse in"> 				<div class="table-responsive"> 					<table class="services-table"> 						<tr> 							<td><strong><?php _e("Service Name:",WL_A_P_SYSTEM );?> </strong></td> 							<td><?php echo $ap_fetch_val->name; ?> </td> 						</tr> 						<tr> 							<td><strong><?php _e("Duration:",WL_A_P_SYSTEM );?> </strong></td> 							<td><?php echo $ap_fetch_val->duration; ?> </td> 							 						</tr> 						<tr><td><strong><?php _e("Padding Time:before",WL_A_P_SYSTEM );?></strong></td> 							<td><?php echo $ap_fetch_val->p_before." "."min"; ?> </td> 							<td><strong><?php _e("Padding Time:after",WL_A_P_SYSTEM );?> </strong></td> 							<td><?php echo $ap_fetch_val->p_after." "."min"; ?> </td> 						</tr> 						<tr> 							<td><strong><?php _e("Service Type:",WL_A_P_SYSTEM );?> </strong></td> 							<td><?php if($ap_fetch_val->service_type=="free_service") echo "Free"; ?>  								<?php if($ap_fetch_val->service_type=="paid_service") echo "Paid"; ?></td> 								 							</tr> 							<?php $servive_type =  $ap_fetch_val->service_type;  							if($servive_type=="paid_service")	{ ?> 							 							<tr> 								<td><strong><?php _e("Price:",WL_A_P_SYSTEM );?> </strong></td> 								<td><?php echo $ap_fetch_val->price; ?></td> 							</tr> 							<?php } ?> 							 							<tr> 								<td><strong><?php _e("Category:",WL_A_P_SYSTEM );?> </strong></td> 								<td> 									<?php foreach($ap_fetch_cat_ac as $cat_value_ac) { ?> 									<?php if($ap_fetch_val->category==$cat_value_ac->id){ echo $cat_value_ac->name;}?> 									<?php }?> 								</td> 							</tr> 							<tr> 								<td><strong><?php _e("Info/Message:",WL_A_P_SYSTEM );?> </strong></td> 								<td colspan="3"><?php echo $ap_fetch_val->info_message; ?> </td> 							</tr> 						</table> 					</div> 				</div> 				<div class="fetch_ser2-<?php echo $ap_fetch_val->id; ?> collapse"> 					<div class="panel-body"> 						<form method="post" id="ser_update_form_<?php echo $ap_fetch_val->id; ?>"> 							<?php  $id=$ap_fetch_val->id;?> 							<div class="row ad-ser"> 								<div class="col-md-6 col-sm-12 col-xm-12 form-group"> 									<label><?php _e("Service Name:",WL_A_P_SYSTEM );?> </label> 									<input type="text" name="u_s_name" id="u_s_name<?php echo $id; ?>" class="form-control" placeholder="Service Name" value="<?php echo $ap_fetch_val->name; ?>" /> 									<span class="validation_alert" id="u_s_name_alert<?php echo $id; ?>"><?php _e("This field is required",WL_A_P_SYSTEM ); ?></span> 								</div> 								<div class="col-md-3 col-sm-12 col-xm-12 form-group"> 									<label><?php _e("Select Icon:",WL_A_P_SYSTEM );?> </label> 									<input class="regular-text s-icon" type="text"  id="ap_u_icon_update" name="update_icon_ser" value="<?php echo $ap_fetch_val->icon; ?>" readonly="readonly"/> 									<div id="u_icon_picker_example_icon1" data-target="#ap_u_icon_update" class="button icon-picker <?php echo $ap_fetch_val->icon; ?>"></div> 								</div> 								<div class="col-md-3 col-sm-12 col-xm-12 form-group"> 									<label><?php _e("Select Color:",WL_A_P_SYSTEM );?> </label>															 									<p><input  name="u_cal_bg_color" class="ap_color_picker"  										value="<?php echo $ap_fetch_val->color; ?>"></p> 									</div> 								</div> 								<div class="row ad-ser"> 									<div class="col-md-6 col-sm-12 col-xm-12 form-group"> 										<label><?php _e("Duration (in minutes):",WL_A_P_SYSTEM );?> </label> 										<?php $service_duration= $ap_fetch_val->duration; ?> 										<select name="u_s_duration" id="u_s_duration" class="form-control"> 											<?php  											for($i=5; $i<=1380; $i+=5) 												{	?> 											<option value="<?php echo $i; ?>" <?php selected($service_duration,  $i ); ?>><?php echo $i; ?></option> 											<?php }	?>  										</select> 										 										<span class="validation_alert" id="u_duration_alert<?php echo $id; ?>"><?php _e("This field is required",WL_A_P_SYSTEM ); ?></span> 										<span class="validation_alert" id="u_duration_alert_number<?php echo $id; ?>"><?php _e("This field is required number",WL_A_P_SYSTEM ); ?></span> 									</div> 								</div> 								<div class="row ad-ser"> 									<div class="col-md-6 col-sm-12 col-xm-12 form-group"> 										<label><?php _e("Padding Time Before</br>(in minutes):",WL_A_P_SYSTEM ); ?> </label> 										<?php  $p_before= $ap_fetch_val->p_before; ?> 										<select name="u_padding_before" id="u_padding_before" class="form-control"> 											<?php  											for($i=0; $i<=300; $i+=5) 												{	?> 											<option value="<?php echo $i; ?>" <?php selected($p_before,  $i ); ?>><?php echo $i; ?></option> 											<?php }	?>  										</select> 										 										<span class="validation_alert" id="u_padding_before_alert<?php echo $id; ?>"><?php _e("This field is required",WL_A_P_SYSTEM ); ?></span> 										<span class="validation_alert" id="u_padding_before_number_alert<?php echo $id; ?>"><?php _e("This field is required number",WL_A_P_SYSTEM ); ?></span> 									</div> 									<div class="col-md-6 col-sm-12 col-xm-12 form-group"> 										<label><?php _e("Padding Time After</br>(in minutes):",WL_A_P_SYSTEM ); ?> </label> 										<?php $p_after=  $ap_fetch_val->p_after; ?> 										<select name="u_padding_after" id="u_padding_after" class="form-control"> 											<?php  											for($i=0; $i<=300; $i+=5) 												{	?> 											<option value="<?php echo $i; ?>" <?php selected($p_after,  $i ); ?>><?php echo $i; ?></option> 											<?php }	?>  										</select> 										 										<span class="validation_alert" id="u_padding_after_alert<?php echo $id; ?>"><?php _e("This field is required",WL_A_P_SYSTEM ); ?></span> 										<span class="validation_alert" id="u_padding_after_number_alert<?php echo $id; ?>"><?php _e("This field is required number",WL_A_P_SYSTEM ); ?></span> 									</div> 								</div> 								<div class="col-md-12 col-sm-12 col-xm-12 form-group"> 									<label><?php _e("Service Type:",WL_A_P_SYSTEM );?> </label> 									<select class="form-control" name="u_service_type" id="u_service_type<?php echo $id; ?>" onchange="u_service_type_function(this.value,<?php echo $id; ?>)"> 										<option value="0"><?php _e("Select Service Type",WL_A_P_SYSTEM ); ?></option> 										<option value="free_service" <?php if($ap_fetch_val->service_type=='free_service'){echo 'selected="selected"'; }?>><?php _e("Free Service",WL_A_P_SYSTEM ); ?></option> 										<option value="paid_service" <?php if($ap_fetch_val->service_type=='paid_service'){echo 'selected="selected"'; }?>><?php _e("Paid Service",WL_A_P_SYSTEM ); ?></option>	 									</select> 									<span class="validation_alert" id="u_service_type_alert<?php echo $id; ?>"><?php _e("Please select duration unit",WL_A_P_SYSTEM ); ?></span> 								</div> 								<div class="row ad-ser"> 									 									<div class="col-md-12 col-sm-12 col-xm-12 form-group" id="u_service_price<?php echo $id; ?>" <?php if($ap_fetch_val->service_type=='free_service'){ ?> style="display:none;" <?php } ?>> 										<label><?php _e("Price:",WL_A_P_SYSTEM );?> </label> 										<input type="text"  name="u_price" step="any" min="0.00" class="form-control ab-question" id="price_1" value="<?php echo $ap_fetch_val->price; ?>"> 									</div> 									 									<div class="col-md-6 col-sm-12 col-xm-12 form-group" style="display:none"> 										<label><?php _e("Capacity:",WL_A_P_SYSTEM );?> </label> 										<input type="number" value="<?php echo $ap_fetch_val->capacity; ?>" name="u_capacity" step="1" min="1" class="form-control ab-question" id="capacity_1"> 									</div> 								</div> 								<div class="row ad-ser"> 									<div class="col-md-12 col-sm-12 col-xm-12 form-group"> 										<label><?php _e("Category:",WL_A_P_SYSTEM );?> </label> 										<select name="u_category_id" id="u_category_id<?php echo $id; ?>" class="form-control"> 											<?php $ap_fetch_cat_ac=$wpdb->get_results("select * from $wpdb->prefix"."apt_category"); ?> 											<option value="0"><?php _e("Select Category",WL_A_P_SYSTEM );?></option> 											<?php foreach($ap_fetch_cat_ac as $cat_value_ac) { ?> 											<option value="<?php echo $cat_value_ac->id;?>" <?php if($ap_fetch_val->category==$cat_value_ac->id) { echo 'selected="selected"';}?>><?php echo $cat_value_ac->name;?> 											</option> 											<?php }?> 										</select> 										<span class="validation_alert" id="u_category_alert<?php echo $id; ?>"><?php _e("Please select Category",WL_A_P_SYSTEM ); ?></span> 									</div> 									<div class="col-md-12 col-sm-12 col-xm-12 form-group"> 										<label><?php _e("Info / Message:",WL_A_P_SYSTEM );?></label> 										<textarea class="form-control" rows="3" name="u_a_info" class="u_a_info<?php echo $id; ?>" placeholder="Info / Message"><?php echo $ap_fetch_val->info_message; ?></textarea> 										<input type="hidden"  value="<?php echo $ap_fetch_val->id; ?>" name="service_id"> 										<span class="validation_alert" id="u_a_info_alert<?php echo $id; ?>"><?php _e("This field is required",WL_A_P_SYSTEM ); ?></span> 									</div> 									<div class="col-md-12 col-sm-12 col-xm-12 form-group"> 										 										<div class="form-group"> 											<button class="btn ser-btn" data-toggle="collapse" data-parent=".accordion" href=".fetch_ser2-<?php echo $ap_fetch_val->id; ?>" id='update_appt_service_<?php echo $ap_fetch_val->id; ?>' onclick="return update_service(<?php echo $ap_fetch_val->id; ?>);"><?php _e("Update",WL_A_P_SYSTEM );?> </button> 											<button class="btn ser-btn" data-toggle="collapse" data-parent=".accordion" href=".fetch_ser2-<?php echo $ap_fetch_val->id; ?>"><?php _e("Cancel",WL_A_P_SYSTEM);?></button> 										</div> 									</div> 								</form> 							</div> 						</div> 					</div> 				</div> 	 				<?php } }?> 				<?php if($ap_fetch_service !=null)  				{ 				 // echo '<button class="btn add-new-delete" id="service_delete"><i class="fas fa-trash-o" aria-hidden="true"></i>'.__('Delete',WL_A_P_SYSTEM ).'</button>'; 				 if($current_role != "administrator"){ 				 	 if($staff_service_setting == 'yes'){						if($service_edit == 'no'){							 echo ''; 		 				}		 				elseif(($current_role != "administrator" && $service_edit == 'yes') || $current_role == "administrator" ){		 					echo '<button class="btn add-new-delete" id="service_delete"><i class="fas fa-trash-o" aria-hidden="true"></i>'.__('Delete',WL_A_P_SYSTEM ).'</button>'; 		 				} 	 				} 				 } 				 else{ 				 	echo '<button class="btn add-new-delete" id="service_delete"><i class="fas fa-trash-o" aria-hidden="true"></i>'.__('Delete',WL_A_P_SYSTEM ).'</button>';  				 } 				  			} 			?>